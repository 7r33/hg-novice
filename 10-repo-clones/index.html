<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2016-07-19 12:34:39 +0200">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="search-domain" value="/swc-releases/2016.06/hg-novice">
    <link rel="stylesheet" type="text/css" href="/swc-releases/2016.06/hg-novice/assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/swc-releases/2016.06/hg-novice/assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="/swc-releases/2016.06/hg-novice/assets/css/lesson.css" />
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicon-swc.ico" />
    
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <title>Version Control with Mercurial: Working with Clone Repositories</title>
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="https://software-carpentry.org" class="pull-left">
        <img class="navbar-logo" src="/swc-releases/2016.06/hg-novice/assets/img/swc-icon-blue.svg" alt="Software Carpentry logo" />
      </a>
      

      
      <a class="navbar-brand" href="/swc-releases/2016.06/hg-novice/">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="/swc-releases/2016.06/hg-novice/conduct/">Code of Conduct</a></li>

	
        
        <li><a href="/swc-releases/2016.06/hg-novice/setup/">Setup</a></li>
        <li><a href="/swc-releases/2016.06/hg-novice/reference/">Reference</a></li>
        <li class="dropdown">
          <a href="/swc-releases/2016.06/hg-novice/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="/swc-releases/2016.06/hg-novice/01-basics/">Automated Version Control</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/02-configuration/">Configuring Mercurial</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/03-create-repo/">Creating a Repository</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/04-tracking/">Tracking Changes to Files</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/05-changes/">Making Changes</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/06-history/">Exploring History</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/07-revert/">Recovering Old Versions</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/08-ignore/">Ignoring Things</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/09-remote-repos/">Remote Repositories</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/10-repo-clones/">Working with Clone Repositories</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/11-collaboration/">Collaboration</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/12-merges/">Merging Changes from Different Clones</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/13-conflicts/">Merge Conflicts</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/14-open/">Open Science</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/15-licensing/">Licensing</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/16-hosting/">Hosting</a></li>
            
          </ul>
        </li>
	

	
	
        <li class="dropdown">
          <a href="/swc-releases/2016.06/hg-novice/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="/swc-releases/2016.06/hg-novice/about/">About</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/extras/discuss.html">Discussion</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/figures/">Figures</a></li>
            
            <li><a href="/swc-releases/2016.06/hg-novice/extras/guide.html">Instructor's Guide</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="/swc-releases/2016.06/hg-novice/license/">License</a></li>
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search...">
        </div>
      </form>
    </div>
  </div>
</nav>





<div class="row">
  <div class="col-md-1">
    <h3>
      
      <a href="/swc-releases/2016.06/hg-novice/09-remote-repos/"><span class="glyphicon glyphicon-menu-left"></span></a>
      
    </h3>
  </div>
  <div class="col-md-10">
    <h3 class="maintitle"><a href="/swc-releases/2016.06/hg-novice/">Version Control with Mercurial</a></h3>
    <h1 class="maintitle">Working with Clone Repositories</h1>
  </div>
  <div class="col-md-1">
    <h3>
      
      <a href="/swc-releases/2016.06/hg-novice/11-collaboration/"><span class="glyphicon glyphicon-menu-right"></span></a>
      
    </h3>
  </div>
</div>


<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 10 min
      </br>
      <strong>Exercises:</strong> 5 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I make local copies of repositories to work in?</p>
</li>
	
      </ul>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Explain how to push, pull, update files, and update metadata among clones of a repository.</p>
</li>
	
	<li><p>Display a simple visualization of the state of a repository and explain how updating the repository affects its state.</p>
</li>
	
      </ul>
    </div>
  </div>
  
</blockquote>

<p>We’re going to simulate working with a repository on different machines
(laptop and lab workstation,
home and work PCs,
local workstation and an HPC cluster,
etc.).
We’ll do this by creating 2 clones of Susan’s <code class="highlighter-rouge">forecast</code> repo from Bitbucket in different directories on our laptops.</p>

<p>Create two directories called <code class="highlighter-rouge">home</code> and <code class="highlighter-rouge">work</code> on your desktop:</p>

<div class="bash highlighter-rouge"><pre class="highlight"><code>$ cd ~/Desktop
$ mkdir home work
</code></pre>
</div>

<p>In the <code class="highlighter-rouge">work</code> directory,
clone the <code class="highlighter-rouge">forecast</code> repository from Bitbucket:</p>

<div class="bash highlighter-rouge"><pre class="highlight"><code>$ cd ~/Desktop/work
$ hg clone https://bitbucket.org/susan/forecast
</code></pre>
</div>

<p><code class="highlighter-rouge">hg clone</code> creates a fresh local copy of a remote repository.</p>

<p>Now switch to the <code class="highlighter-rouge">home</code> directory and clone the <code class="highlighter-rouge">forecast</code> repo from Bitbucket
there too:</p>

<div class="bash highlighter-rouge"><pre class="highlight"><code>$ cd ~/Desktop/home
$ hg clone https://bitbucket.org/susan/forecast
</code></pre>
</div>

<p>Our computer now has two new copies of the repository:</p>

<p><img src="/swc-releases/2016.06/hg-novice/fig/hg-after-home-work-clones.svg" alt="After Creating `work` and `home` Clones of Repository" /></p>

<p>Let’s change the <code class="highlighter-rouge">work</code> copy of the repository by adding a new file in which we’re going to start building the bibliography for the paper that will eventually be written:</p>

<div class="bash highlighter-rouge"><pre class="highlight"><code>$ cd ~/Desktop/work/
$ nano biblio.txt
</code></pre>
</div>

<p>and type into that file:</p>

<div class="output highlighter-rouge"><pre class="highlight"><code>NEMO Ocean Engine, Version 3.4. Madec G., et al. 2012.
</code></pre>
</div>

<p>Tell Mercurial to track our new file,
and commit it:</p>

<p class="bash">~~
$ hg add biblio.txt
$ hg commit -m”Start creating bibliography for the forecast paper.”
~~~</p>

<p>then push the change to Bitbucket:</p>

<div class="bash highlighter-rouge"><pre class="highlight"><code>$ hg push
</code></pre>
</div>

<div class="output highlighter-rouge"><pre class="highlight"><code>pushing to https://bitbucket.org/susan/forecast
searching for changes
http authorization required for https://bitbucket.org/susan/forecast
realm: Bitbucket.org HTTP
user: susan
password:
adding changesets
adding manifests
adding file changes
added 1 changesets with 1 changes to 1 files
</code></pre>
</div>

<p>Note that we didn’t have to create a remote path called <code class="highlighter-rouge">default</code>;
Mercurial did that automatically when we cloned the repository from Bitbucket.</p>

<p>Our three repositories now look like this:</p>

<p><img src="/swc-releases/2016.06/hg-novice/fig/hg-after-change-to-work-clone.svg" alt="After Pushing Change from `work` Repository" /></p>

<p>We can now download the change into our <code class="highlighter-rouge">home</code> repository:</p>

<div class="bash highlighter-rouge"><pre class="highlight"><code>$ cd ~/Desktop/home/
$ hg pull
</code></pre>
</div>

<div class="output highlighter-rouge"><pre class="highlight"><code>pulling from https://bitbucket.org/susan/forecast
searching for changes
http authorization required for https://bitbucket.org/susan/forecast
realm: Bitbucket.org HTTP
user: susan
password:
adding changesets
adding manifests
adding file changes
added 1 changesets with 1 changes to 1 files
(run 'hg update' to get a working copy)
</code></pre>
</div>

<p>If we look at our repository history now with the <code class="highlighter-rouge">hg log --graph</code> command we can see that the <code class="highlighter-rouge">@</code> character marks the revision that our working copy of the files is at and the revision that we pulled from Bitbucket is above that,
meaning it has not yet been applied to our working files:</p>

<div class="bash highlighter-rouge"><pre class="highlight"><code>$ hg log --graph
</code></pre>
</div>

<div class="output highlighter-rouge"><pre class="highlight"><code>o  changeset:   3:68fd235a0541
|  user:        Susan Allen &lt;sallen@eos.ubc.ca&gt;
|  date:        Sun Jun 14 11:04:44 2015 -0700
|  summary:     Start creating bibliography for the forecast paper.
|
@  changeset:   2:d14b5f2372fc
|  user:        Susan Allen &lt;sallen@eos.ubc.ca&gt;
|  date:        Sun Jun 14 11:03:17 2015 -0700
|  summary:     Add note about data source for Fraser River flow forcing.
|
o  changeset:   1:41b3e1218ad2
|  user:        Susan Allen &lt;sallen@eos.ubc.ca&gt;
|  date:        Sun Jun 14 11:02:05 2015 -0700
|  summary:     Add note about source for atmospheric forcing.
|
o  changeset:   0:983898576cad
   user:        Susan Allen &lt;sallen@eos.ubc.ca&gt;
   date:        Sun Jun 14 11:00:20 2015 -0700
   summary:     Starting to plan the daily NEMO forecast system.

</code></pre>
</div>

<p>To apply those changes we use <code class="highlighter-rouge">hg update</code>
(as Mercurial helpfully suggested at the end of the <code class="highlighter-rouge">hg pull</code> process):</p>

<div class="bash highlighter-rouge"><pre class="highlight"><code>$ hg update
</code></pre>
</div>

<div class="output highlighter-rouge"><pre class="highlight"><code>1 files updated, 0 files merged, 0 files removed, 0 files unresolved
</code></pre>
</div>

<p>You can use <code class="highlighter-rouge">hg log --graph</code> again to see that the <code class="highlighter-rouge">@</code> has been moved to changeset 3 which tells us that our working copy is up to date.</p>

<p>Here is what our two local repositories and our Bitbucket repository look like now,
showing how the <code class="highlighter-rouge">biblio.txt</code> file has been copied from Bitbucket to our <code class="highlighter-rouge">home</code> repository clone:</p>

<p><img src="/swc-releases/2016.06/hg-novice/fig/hg-after-pulling-to-home-clone.svg" alt="After Pulling Change to 'home' Repository" /></p>

<p>Generally,
we are unlikely to have multiple copies of the same remote repository on our laptop at once.
Instead,
one of those copies would be on our laptop,
and the other on a lab workstation (for example).
Pushing and pulling changes gives us a reliable way to share work between different machines,
and,
as we will see shortly,
different people.</p>

<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Use <code class="highlighter-rouge">hg clone</code> to make a local copy of a remote repository.</p>
</li>
    
  </ul>
</blockquote>


      
      <hr/>
<footer>
  <div class="row">
    <div class="col-md-6" align="left">
      <h4>
	Copyright &copy; 2016
	<a href="https://software-carpentry.org">Software Carpentry Foundation</a>
	
      </h4>
    </div>
    <div class="col-md-6" align="right">
      <h4>
	<a href="/">Source</a>
	/
	<a href="/blob/gh-pages/CONTRIBUTING.md">Contributing</a>
	/
	<a href="mailto:lessons@software-carpentry.org">Contact</a>
      </h4>
    </div>
  </div>
</footer>

      
    </div>
    <script src="/swc-releases/2016.06/hg-novice/assets/js/jquery.min.js"></script>
<script src="/swc-releases/2016.06/hg-novice/assets/js/bootstrap.min.js"></script>
<script src="/swc-releases/2016.06/hg-novice/assets/js/lesson.js"></script>

  </body>
</html>
